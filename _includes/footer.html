<footer class="site-footer h-card">
        <div id="socials">
          <a href="https://{{ site.facebook_username| escape }}" target="_blank">{{ site.facebook_username| escape }}</a>
          <a href="https://www.twitter.com/{{ site.twitter_username| escape }}" target="_blank">@{{ site.twitter_username| escape }}</a>
          <a href="https://soundcloud.com/speedywunderground" target="_blank">soundcloud.com/speedywunderground</a>
          
        </div>
        <img src="{{site.baseurl}}/assets/images/logo.png" alt="{{site.title}}" class="thumbnail"/>
</footer>
<div id="js-player" class="container gradient">

    <div class="player gradient">

        <a class="button gradient" id="play" href="" title=""></a>
        <a class="button gradient" id="mute" href="" title=""></a>
     
            <input type="range" id="seek" value="0" max=""/>
 
        <a class="button gradient" id="close" href="" title=""></a>
         
    </div><!-- / player -->
     
</div><!-- / Container-->

<script>
document.addEventListener('snipcart.ready', function() {
    

    function myCartUpdate() {
      var count = Snipcart.api.items.count();
      //console.log(count);
      if (count != 0) {
        if ($(window).width() < 768) {
          $("#my-cart").html('<a href="#" class="snipcart-checkout"><img src="{{site.baseurl}}/assets/images/cart-white.svg" alt="Your Cart"/> '+ count + ' Items</a>');
      
        }else {
          $("#my-cart").html('<a href="#" class="snipcart-checkout"><img src="{{site.baseurl}}/assets/images/cart.svg" alt="Your Cart"/> '+ count + ' Items</a>');
      
        }
      } else {
        $("#my-cart").html('');
      }
    }

    $(window).on('resize', function(){
      myCartUpdate();
    });

    myCartUpdate();

    Snipcart.subscribe('cart.closed', function() {
      myCartUpdate();
    });

    Snipcart.subscribe('item.updated', function (item) {
      myCartUpdate();
    });

    $(".js-product-size").on('change', function(e) {
        e.preventDefault(); 
        $(this).next().attr('data-item-custom1-value' , this.value);
    });

    $(".js-product-colour").on('change', function(e) {
        e.preventDefault(); 
        $(this).next().attr('data-item-custom2-value' , this.value);
    });


});

TweenMax.from(".background", .5, {opacity:0}).delay(1);
TweenMax.from(".triangle", 1, {height:0}).delay(1.5);
TweenMax.from(".t-line", 1, {opacity:0}).delay(1.5);
TweenMax.from(".hline", 1, {opacity:0}).delay(1.5);


function mobileSwitch() {
    var element = document.getElementById("js-nav");
    element.classList.toggle("is-active"); 
    var body = document.body;
    body.classList.toggle("fixed"); 
    var element = document.getElementById("nav");
    element.classList.toggle("mobile-menu-on"); 
}

$(document).ready(function(){
  $('.js-releases').slick({
    autoplay: true,
    autoplaySpeed: 2000,
    prevArrow: $('.prev'),
    nextArrow: $('.next'),
  });



  //MUSIC PLAYER STUFF

  const container = $('.container');
	cover = $('.cover');
	play = $('#play');
	pause = $('#pause');
	mute = $('#mute');
	muted = $('#muted');
	close = $('#close');
	song = new Audio();
	duration = song.duration;

  // if (song.canPlayType('audio/mpeg;')) {
  // 	song.type= 'audio/mpeg';
  // 	song.src= '{{site.baseurl}}/music/MBT_01.mp3';
	// } else {
  // 	song.type= 'audio/ogg';
  // 	song.src= '{{site.baseurl}}/music/track1.ogg';
	// }

  play.on('click', function(e) {
		e.preventDefault();
		song.play();

		$(this).replaceWith('<a class="button gradient" id="pause" href="" title=""></a>');
		container.addClass('containerLarge');
		cover.addClass('coverLarge');
		$('#close').fadeIn(300);
		$('#seek').attr('max',song.duration);
	});

	pause.on('click', function(e) {
		e.preventDefault();
		song.pause();
		$(this).replaceWith('<a class="button gradient" id="play" href="" title=""></a>');

	});

  mute.on('click', function(e) {
		e.preventDefault();
		song.volume = 0;
		$(this).replaceWith('<a class="button gradient" id="muted" href="" title=""></a>');

	});

	muted.on('click', function(e) {
		e.preventDefault();
		song.volume = 1;
		$(this).replaceWith('<a class="button gradient" id="mute" href="" title=""></a>');

	});

  $('#close').click(function(e) {
		e.preventDefault();
		container.removeClass('containerLarge');
		cover.removeClass('coverLarge');
		song.pause();
		song.currentTime = 0;
		$('#pause').replaceWith('<a class="button gradient" id="play" href="" title=""></a>');
		$('#close').fadeOut(300);
	});

  $("#seek").bind("change", function() {
		song.currentTime = $(this).val();
		$("#seek").attr("max", song.duration);
	});

  song.addEventListener('timeupdate',function (){
	curtime = parseInt(song.currentTime, 10);
		$("#seek").attr("value", curtime);
	});

  // Play Sample

  $('.js-play-sample').on('click', function(e) {
		e.preventDefault();
    
    song.src= '{{site.baseurl}}' + $(this).attr('data-sample');
    console.log(song.src);
    song.play();
    play.replaceWith('<a class="button gradient" id="pause" href="" title=""></a>');
		container.addClass('containerLarge');
		cover.addClass('coverLarge');
		$('#close').fadeIn(300);
		$('#seek').attr('max',song.duration);

   // console.log(song.src);
    //$(this).next().attr('data-item-custom1-value' , this.value);
  });


});


</script>
